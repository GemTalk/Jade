"Boot a Jade development image"

| list |
PackageManager current install: 'C:\Users\ewinger\source\repos\RemoteServiceReplication\src-dolphin\RemoteServiceReplication-Test.pac'.

list := #(
	'JGF Dolphin'
	'JGF Fading Dialog'
	'GemStone C Interface'
	'GemStone Objects'
	'GemStone Session'
	'VisualWorks Component'
	'Jade UI Base'
	'Jade Class Browser'
	'Jade Method Browser'
	'Jade Inspector'
	'Jade Autocompletation'
	'Jade User Browser'
	'Monticello'
	'Jade UI'
	'Jade Test Browser'
	'Jade System Browser'
	'Jade Process Browser'
	'Object Log Browser'
	'Jade Login'
	'Jade Deployment'
	'Contacts Demo'
	'Jade in Dolphin'
	'Jade Tests'
).

(Delay forMilliseconds: 200) wait.
ProgressDialog showModalWhile: [:progress |
	1 to: list size do: [:i |
		| name percent |
		name := list at: i.
		percent := (i * 100 / list size) asInteger.
		progress
			value: percent;
			text: 'Loading package: ' , name;
			yourself.
		PackageManager current install: 'sources\' , name , '.pax'.
	
	].
].

"Install Rowan Client Services from a separate directory"
PackageManager current install: 'C:\Users\ewinger\source\repos\Dolphin7114\Dolphin\RowanClientServices\Rowan Client Services.pac'.

list := #(
	'Rowan UI Base'
	'Rowan UI Tests'
	'RSR Support'
).

(Delay forMilliseconds: 200) wait.
ProgressDialog showModalWhile: [:progress |
	1 to: list size do: [:i |
		| name percent |
		name := list at: i.
		percent := (i * 100 / list size) asInteger.
		progress
			value: percent;
			text: 'Loading package: ' , name;
			yourself.
		PackageManager current install: 'sources\' , name , '.pax'.
	].
].


SessionManager current splashShowAtStartup: false.
"SmalltalkSystemShell allInstances first position: 20@50."
(TranscriptShell allInstances , #(nil)) first ifNotNil: [:shell | shell view position: 20@600].
IdeaSpaceShell allInstances isEmpty ifTrue: [
	IdeaSpaceShell show
		absorbCard: SmalltalkWorkspaceDocument show;
		absorbCard: PackageBrowserShell show;
		absorbCard: ClassBrowserShell show;
		"position: 50@80; extent: 1200@700;"
		yourself.
].
ClassBrowserAbstract allSubclasses do: [:each | 
	(each plugins includes: DebugInfoPlugin) ifFalse: [each plugins add: DebugInfoPlugin]].
Debugger defaultExtent: 1000@600.
!
JadeiteLoginShell show
	"position: 80@20;"
	yourself.
JadeLoginShell removeFromDevelopmentTools.
JadeiteLoginShell addToDevelopmentTools.
JadeiteDevelopmentSUnitBrowser addToDevelopmentTools.
JadeiteDevelopmentSUnitBrowser initialize."to open in ideaspace"
"to prevent right-mouse drag errors #nmBeginRDrag:"
"ListView initializeNotificationMap."
Cursor wait showWhile: [
	Object recompileAll. "https://github.com/dolphinsmalltalk/Dolphin/issues/852#issuecomment-623143858"
	Transcript flush. 
	SourceManager default compressSources.
	(Delay forMilliseconds: 200) wait.
	SessionManager current saveImage.
].
!
